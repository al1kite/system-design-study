## Spring Cloud Netflix Eureka

<img width="230" src="https://github.com/user-attachments/assets/318bfea8-e317-47de-a721-da0774f566b1">

앞에 보이는 그림은 하나의 마이크로서비스가 3개의 인스턴스에 의해 확장/개발되는 경우이다.
서비스는 하나인데, 3개의 인스턴스에 나눠서 개발되고 있다. 일종의 로드밸런서 역할을 하는 것처럼 부하분산 처리되어있다.

우리가 가지고있는 노트북이나 PC가 한대일땐 여러개의 서비스를 동시에 실행하기 위해서는 반드시 포트를 나눠서 실행해야 하는데
하나의 IP밖에 없는 상태라고 하면 포트를 분산시켜서 실행해야 한다. 따라서 localhost라는 IP 하나에 8080 또는 8081, 8082 와 같이 포트가 나눠져있고
만약 가용할 수 있는 PC가 한대 이상이라고 하면 그때는 서버 IP 1번:8080,  서버 IP 2번:8080,  서버 IP 3번:8080와 같이 서버가 다르기 때문에 같은 포트로 실행할 수 있다.
서버가 1대인지 3대인지에 따라 포트 번호가 달라진다. 

현재 1대의 서버만 쓸 거기 때문에 하나의 IP address 에서 3개의 포트를 사용하는 방식으로 적용할 것.
우리가 만들고 있는 모든 마이크로서비스는 전부 Spring Cloud Netflix Eureka 라는 제품에 등록할 것이다.
이렇게 유레카가 해주는 역할을 서비스 디스커버리라고 한다. 서비스 디스커버리는 말 그대로 외부에서 다른 서비스들이 마이크로서비스를 검색하기 위해 사용되는 개념이고 일종의 전화부 책과 같다 생각하면 된다.
이 안에 들어가있는 정보는 이름, Key값을 갖는 상태와 Value 가 있다고 가정해보자. 

다음과 같이 어떤 서비스가 어느 위치에 있는지를 등록하고 있는 정보가 서비스 디스커버리라고 보면 된다.
이렇게 서비스들의 등록에 관련된 작업과 검색에 관련된 작업을 해주는 걸 디스커버리 서비스라고 한다.
우리는 넷플릭스의 유레카라는 제품을 사용해 구현할 것.

넷플릭스라는 회사가 가지고 있는 자사의 클라우드 기술을 자바 스프링 재단에 기부해 사용할 수 있는게 유레카라고 보면 될 것.
이렇게 각각의 마이크로서비스가 전부 자신의 위치 정보를 일단 스프링 클라우드 넷플릭스 유레카, 쉽게 말해 유레카 서버에 등록이라는 작업을 먼저 하면 된다.
그 후 이 마이크로서비스를 사용하고 싶은 클라이언트가 있을텐데, 이 클라이언트는 먼저 자신이 필요한 어떤 요청 정보를 로드밸런서라던가 게이트웨이 (보통 API 게이트웨이)에 자신이 필요한 요청 정보를 전달하게 되면
그 요청 정보가 서비스 디스커버리에 전달이 돼서 내가 필요한 정보가 어디에 있냐 물어보고, 예를 들어 서비스 디스커버리는 당신이 필요한 정보는 1번 서버로 가세요 등으로 반환하면 사용자 요청정보가 호출되고 그에 대한 정보값을 가져가는 구조로 보면 된다.

앞에 보이는 서비스 디스커버리가 해주는 역할은 각각의 마이크로서비스가 어디에 누가 저장되어 있으며 요청정보가 들어왔을 때 
그 요청 정보에 따라 필요한 서비스의 위치를 알려주는 역할이라고 보면 된다.

<img width="1423" src="https://github.com/user-attachments/assets/d573d7b3-5819-456c-8b09-6c1cfdc151d7">
