## Spring Cloud Gateway

이번에는 스프링 클라우드 게이트웨이에 이전에 다룬 Zuul 필터처럼 필터를 적용시켜 볼 것.
스프링 클라우드 게이트웨이에서 필터가 어떤 동작에 의해 작동하는지 프로세스를 살펴볼 예정.


클라이언트가 퍼스트 서비스, 세컨드 서비스를 사용하고 싶다고 할 때, 중간에 스프링 클라우드 게이트웨이가 자리 잡고 있다.
클라이언트가 스프링 클라우드 게이트웨이에 어떤 요청을 전달하게 되면 그 게이트웨이에서 
퍼스트 서비스로 갈지 세컨드 서비스로 갈지 판단한 다음 서비스의 요청을 분기해주게 된다.

이렇게 스프링 클라우드 게이트 안에서 일어나는 작업을 좀 더 확대해서 보도록 하자.
먼저 가장 왼쪽에 게이트웨이가 어떤 요청이 들어왔는지 클라이언트로부터 어떤 요청이 들어왔는지 요청 정보를 받고
그 요청에 대한 사전 조건으로 어떤 이름으로 요청되었는지 조건을 분기해주는데 이는 predicate 라는 영역에서 조건을 분기해준다.

다음에 사전 필터와 사후 필터를 pre-filter 와 post-filter 로 작성해서 요청 정보를 구성할 수 있다.
해당 예제에선 두가지 경우를 다뤄볼 텐데 하나는 java 코드를 직접 하나 만들어서 볼 것.
그 동안은 application.yml 파일에 작업했는데 그 작업을 yml 파일이 아니라 java 코드에서 처리할 수 있다.
두번째는 이전과 마찬가지로 application.yml 파일에 직접 정의하는 것도 다뤄볼 예정.

클라우드 자체의 필터는 다음과 같은 구조로 되어 있다.
요청 정보가 들어오게 되면 그게 어떤 건지 판단하는게 predicate 이고 pre-filter는 어떤 작업이 일어나지 사전 필터,
어떤 처리가 끝난 다음 호출되는 post-filter 로 나눠진다.
작업하는 방법은 property로도 가능하고 java 코드로도 가능하다.

요청 정보가 들어오면 그 정보가 pre-filter를 통해서 어떤 프로세스의 정보를 처리한 다음에
마지막 단계에 원래 있었던 클라이언트한테 돌려주는 이런 과정을 거치게 된다.
이 작업을 하기 위해 Java 코드를 이용해 필터 추가 작업을 만들어 볼 것.

FilterConfig 라는 클래스를 하나 만들고 @Configuration Annotation 추가




